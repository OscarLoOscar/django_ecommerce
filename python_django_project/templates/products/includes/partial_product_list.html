{% load query_transform %}
<!---->
{% load humanize %}

<div class="row">
  {% if products %}
  <!---->
  {% for product in products %}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card product-preview">
      <img
        class="card-img-top"
        style="height: 380px; width: 100%; object-fit: cover"
        src="{{ product.image_00.url }}"
        alt=""
      />
      <div class="card-body">
        <h4 style="color: #1f5b72ff !important">{{ product.title | title }}</h4>
        <p><i class="fa-solid fa-dollar-sign"></i> {{product.price}}</p>

        <div class="row py-2">
          <div class="col-12">
            <i class="fa-solid fa-ring"></i>
            {% if product.category.category_type == '戒指' %} Size :
            {{product.size|apnumber | capfirst}}
            <!---->
            {% else %} Not Applicable
            <!---->
            {% endif %}
          </div>
        </div>

        <a
          href="{% url 'products:product_detail' product.id %}"
          class="btn btn-outline-light border mb-4 bg-success"
          style="background-color: #ffb7b7ff; color: #fff"
          >More Info</a
        >
      </div>
    </div>
  </div>
  {% endfor %}
  <!---->
  {% else %}
  <div class="col-md-12 text-center">
    <p>無搵到相關產品。</p>
  </div>
  {% endif %}
</div>

<div class="row">
  <div class="col-md-12"></div>
</div>
<div class="row">
  <div class="col-md-12">
    {% if products.has_other_pages %}
    <ul class="pagination">
      {% if products.has_previous %}
      <li class="page-item">
        <a
          class="page-link ajax-page-link"
          href="?{% url_replace request 'page' products.previous_page_number %}"
          >&laquo;</a
        >
      </li>
      {% else %}
      <li class="page-item disabled"><a class="page-link">&laquo;</a></li>
      {% endif %}
      <!---->
      {% for i in products.paginator.page_range %}
      <li class="page-item {% if products.number == i %}active{% endif %}">
        <a
          class="page-link ajax-page-link"
          href="?{% url_replace request 'page' i %}"
          >{{ i }}</a
        >
      </li>
      {% endfor %}
      <!---->
      {% if products.has_next %}
      <li class="page-item">
        <a
          class="page-link ajax-page-link"
          href="?{% url_replace request 'page' products.next_page_number %}"
          >&raquo;</a
        >
      </li>
      {% else %}
      <li class="page-item disabled"><a class="page-link">&raquo;</a></li>
      {% endif %}
    </ul>
    {% endif %}
  </div>
</div>
