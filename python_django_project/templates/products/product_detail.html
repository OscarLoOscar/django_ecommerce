{% extends 'base.html' %}
<!---->
{% load humanize %}
<!---->
{% load static %}
<!---->
{% block title %} | {{ product.title | title }}
<!---->
{% endblock %}
<!---->
{% block content %}
<section
  id="showcase-inner"
  class="py-5 text-white"
  style="background-color: #174152ff"
>
  <div class="container">
    <div class="row text-center">
      <div class="col-md-12">
        <h1 class="display-4">{{ product.title | title }}</h1>
        <p class="lead">
          <i class="fas fa-map-marker"></i> {{ product.district | title }}
        </p>
      </div>
    </div>
  </div>
</section>

<section id="bc" class="mt-3">
  <div class="container">
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'pages:index' %}">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{% url 'products:index' %}">Products</a>
        </li>
        <li class="breadcrumb-item active">{{ product.title | title }}</li>
      </ol>
    </nav>
  </div>
</section>

<section id="product" class="py-4">
  <div class="container">
    <a href="{% url 'products:index' %}" class="btn btn-light mb-4"
      >Back To Products</a
    >
    <div class="row">
      <div class="col-md-9">
        <img
          src="{{ product.image_00.url }}"
          alt=""
          class="img-main img-fluid mb-3"
          style="
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
          "
        />

        <div class="row mb-5 thumbs">
          {% for img in product_images %}
          <!---->
          {% if product.image_00 %}
          <div class="col-md-2 col-4 mb-2">
            <a href="{{ product.image_00.url }}" data-lightbox="home-images">
              <img
                src="{{ product.image_00.url }}"
                class="img-fluid border"
                style="height: 80px; width: 100%; object-fit: cover"
              />
            </a>
          </div>
          {% endif %}
          <!---->
          {% if product.image_01 %}
          <div class="col-md-2 col-4 mb-2">
            <a href="{{ product.image_01.url }}" data-lightbox="home-images"
              ><img
                src="{{ product.image_01.url }}"
                class="img-fluid border"
                style="height: 80px; width: 100%; object-fit: cover"
            /></a>
          </div>
          {% endif %}
          <!---->
          {% if product.image_02 %}
          <div class="col-md-2 col-4 mb-2">
            <a href="{{ product.image_02.url }}" data-lightbox="home-images"
              ><img
                src="{{ product.image_02.url }}"
                class="img-fluid border"
                style="height: 80px; width: 100%; object-fit: cover"
            /></a>
          </div>
          {% endif %}
          <!---->
          {% if product.image_03 %}
          <div class="col-md-2 col-4 mb-2">
            <a href="{{ product.image_03.url }}" data-lightbox="home-images"
              ><img
                src="{{ product.image_03.url }}"
                class="img-fluid border"
                style="height: 80px; width: 100%; object-fit: cover"
            /></a>
          </div>
          {% endif %}
          <!---->
          {% if product.image_04 %}
          <div class="col-md-2 col-4 mb-2">
            <a href="{{ product.image_04.url }}" data-lightbox="home-images"
              ><img
                src="{{ product.image_04.url }}"
                class="img-fluid border"
                style="height: 80px; width: 100%; object-fit: cover"
            /></a>
          </div>
          {% endif %}
          <!---->
          {% endfor %}
        </div>
        <!-- Product Detail-->
        <div class="card mb-5">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <i class="fa-regular fa-heart text-secondary"></i>
              <b>Product Name : </b>
              <span class="float-right text-primary font-weight-bold"
                >{{ product.title | title }}</span
              >
            </li>
            <li class="list-group-item">
              <i class="fas fa-money-bill-alt text-success"></i> <b>Price : </b>
              <span class="float-right text-primary font-weight-bold"
                >${{ product.price | intcomma }}</span
              >
            </li>
            <li class="list-group-item">
              <i class="fas fa-box text-secondary"></i> <b>Stock : </b>
              {% if product.category.category_type == "耳環" %}
              <span class="float-right"
                >Tailor-made items,Please contact Only K</span
              >
              {% else %}
              <span class="float-right">{{ product.stock_count }} items</span>
              {% endif %}
            </li>
            <li class="list-group-item">
              <i class="fas fa-ruler-combined text-secondary"></i>
              <b>Size : </b>
              {% if product.category.category_type == "戒指" %}
              <span class="float-right">{{ product.size }}</span>
              {% else %}
              <span class="float-right">Not Applicable</span>
              {% endif %}
            </li>
          </ul>
        </div>

        <!-- -->
        <div class="row mb-4">
          {% comment %}
          <div class="col-md-6">
            <h5 class="text-secondary">
              <i class="fas fa-user-md"></i> Professions
            </h5>
            {% if product.profession.all %}
            <!---->
            {% for p in product.profession.all %}
            <span class="badge badge-info p-2 m-1">{{ p.name }}</span>
            {% endfor %}
            <!---->
            {% else %}
            <p class="text-muted">None listed</p>
            {% endif %}
          </div>
          <div class="col-md-6">
            <h5 class="text-secondary">
              <i class="fas fa-concierge-bell"></i> Services
            </h5>
            {% if product.services.all %}
            <!---->
            {% for s in product.services.all %}
            <span class="badge badge-success p-2 m-1"
              >{{ s.name | title }}</span
            >
            {% endfor %}<!---->
            {% else %}
            <p class="text-muted">None listed</p>
            {% endif %}
          </div>
          {% endcomment %}
        </div>

        <div
          class="card card-body mb-5"
          style="background-color: #fbc6c6ff; border: none; color: #777474ff"
        >
          <h5 class="card-title" style="font-weight: bold">Description</h5>
          <hr />
          <div class="card-text">{{ product.description | linebreaks }}</div>
        </div>
      </div>

      <div class="col-md-3">
        {% comment %}
        <div class="card shadow-sm mb-3">
          {% if product.image_00 %}
          <img
            class="card-img-top"
            src="{{ product.image_00.url }}"
            style="height: 200px; object-fit: cover"
          />
          {% endif %}
          <div class="card-body text-center">
            <h5 class="card-title">Practitioner</h5>
            <h6 class="text-secondary">{{ product.doctor.name }}</h6>
          </div>
        </div>
        {% endcomment %}
        <button
          class="btn btn-primary btn-block btn-lg"
          data-toggle="modal"
          data-target="#inquiryModal"
          style="background-color: #ffb7b7ff; border: none"
        >
          Make An Inquiry
        </button>
        <button
          class="btn btn-primary btn-block btn-lg"
          data-toggle="modal"
          data-target="#inquiryModal"
          style="background-color: #ffb7b7ff; border: none"
        >
          Add To Shopping Cart
        </button>
      </div>
      <!-- shopping cart-->
    </div>
  </div>
</section>

<div class="modal fade" id="inquiryModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Clinic Inquiry</h5>
        <button type="button" class="close text-white" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'products:search' %}">
          {% csrf_token %}
          <input type="hidden" name="listing_id" value="{{ product.id }}" />
          <input
            type="hidden"
            name="doctor_email"
            value="{{ product.doctor.email }}"
          />

          {% if user.is_authenticated %}
          <input type="hidden" name="user_id" value="{{ user.id }}" />
          {% else %}
          <input type="hidden" name="user_id" value="0" />
          {% endif %}

          <div class="form-group">
            <label>Clinic:</label>
            <input
              type="text"
              name="product"
              class="form-control"
              value="{{ product.title }}"
              readonly
            />
          </div>
          <div class="form-group">
            <label>Name:</label>
            <input
              type="text"
              name="name"
              class="form-control"
              {%
              if
              user.is_authenticated
              %}
              value="{{ user.get_full_name }}"
              readonly
              {%
              endif
              %}
              required
            />
          </div>
          <div class="form-group">
            <label>Email:</label>
            <input
              type="email"
              name="email"
              class="form-control"
              {%
              if
              user.is_authenticated
              %}
              value="{{ user.email }}"
              readonly
              {%
              endif
              %}
              required
            />
          </div>
          <div class="form-group">
            <label>Phone:</label>
            <input type="text" name="phone" class="form-control" required />
          </div>
          <div class="form-group">
            <label>Message:</label>
            <textarea name="message" class="form-control" rows="3"></textarea>
          </div>
          <input
            type="submit"
            value="Send Message"
            class="btn btn-block btn-secondary"
          />
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
